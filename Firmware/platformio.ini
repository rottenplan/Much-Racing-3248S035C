[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200
; upload_port = COM5
; monitor_port = COM5

lib_deps =
    bodmer/TFT_eSPI @ ^2.5.0
    mikalhart/TinyGPSPlus @ ^1.0.3
    tamctec/TAMC_GT911 @ ^1.0.2
    bblanchon/ArduinoJson @ ^7.0.0
    ; https://github.com/PaulStoffregen/XPT2046_Touchscreen.git (Removed)
; TFT_eSPI Configuration
; User provided setup (HSPI / S3-like pinout)
build_flags =
    -D USER_SETUP_LOADED=1
    -D ST7789_DRIVER=1
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=320
    -D TFT_RGB_ORDER=TFT_BGR
    -D TFT_INVERSION_ON
    ; HSPI Pins
    -D TFT_MOSI=13
    -D TFT_MISO=12
    -D TFT_SCLK=14
    -D TFT_CS=15
    -D TFT_DC=2
    -D TFT_RST=-1   ; RX/NC on this board. Use Software Reset.
    ; -D TFT_BL=27 ; Disabled to prevent startup glitch (Managed manually)
    -D TOUCH_CS=-1 ; Defined to silence warning, not used.
    
    -D LOAD_GLCD=1
    -D LOAD_FONT2=1
    -D LOAD_FONT4=1
    -D LOAD_FONT6=1
    -D LOAD_FONT7=1
    -D LOAD_FONT8=1
    -D LOAD_GFXFF=1
    -D SMOOTH_FONT=1
    
    -D USE_HSPI_PORT=1
    -D SPI_FREQUENCY=27000000   ; Match reference ~24MHz (Standard ST7789 safe limit)
    -D SPI_READ_FREQUENCY=20000000
    -D SPI_TOUCH_FREQUENCY=2500000

[env:esp32_ota]
extends = env:esp32dev
upload_protocol = espota
upload_port = 192.168.4.1

